<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/ApplyMessage.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <script type="text/javascript" charset="UTF-8">
    	var contentUl;
    	var contentList = new Array();
      	mui.init({
				pullRefresh: {
					container: '#messageRefresh', //待刷新区域标识，querySelector能定位的css选择器均可，比如：id、.class等
					down: {
						height: 50, 
						contentrefresh: "正在加载...", 
						contentnomore: '没有更多数据了', 
						callback: refreshMessageList 
					}, 
					up : {
						height: 50, 
						contentrefresh: "正在加载...", 
						contentnomore: '没有更多数据了', 
						callback: loadMoreMessage 
					}
				}
			});

			function refreshMessageList() {
				setTimeout(function(){
					mui('#messageRefresh').pullRefresh().endPulldownToRefresh();
				}, 2000);
			
			};
			
			function loadMoreMessage() {
				setTimeout(function(){
					mui('#messageRefresh').pullRefresh().endPullupToRefresh();
				}, 2000);
			};
			
			mui.plusReady(function() {
				initData();
				initUi();
			});
			
			function initData() {
				for(var i = 0; i < 10; i++) {
					var message = new ApplyMessage();
					message.applyStatus = '审批通过';
					message.applyDetail = '急缺电脑';
					message.applyTime = '12:00';
					contentList.push(message);
				}
			};
			
			function initUi(){
				contentUl = document.getElementById('content'); 
				createContentList();
			};
			
			function createContentList() {
				for(var i in contentList) {
					var item = contentList[i];
					var li = createLiItem(item);
					contentUl.appendChild(li);
				}
			};
			
			function createLiItem(item) {
				var div = document.createElement('div');
				div.className = 'item';
				
				var contentDiv = document.createElement('div');
				contentDiv.className = 'item-content';
				
				var title = document.createElement('p');
				title.innerText = '你提交的采购申请';
				var span = document.createElement('span');
				span.className = 'item-apply-status';
				span.innerText = item.applyStatus;
				title.appendChild(span);
				var label = document.createTextNode(',请知晓');
				title.appendChild(label);
				contentDiv.appendChild(title);
				
				var p = document.createElement('p');
				p.innerText = '采购事由:';
				var span1 = document.createElement('span');
				span1.innerText = item.applyDetail;
				p.appendChild(span1);
				contentDiv.appendChild(p);
				
				div.appendChild(contentDiv);
				
				var timeP = document.createElement('p');
				timeP.innerText = item.applyTime;
				timeP.className = 'item-time';
				div.appendChild(timeP);
				
				var li = document.createElement('li');
				li.className = 'mui-table-view-cell';
				li.appendChild(div);
				return li;
			}
    </script>
    <style>
    html, body {
    	width: 100%;
    	height: 100%;
    	margin: 0;
    	padding: 0;
    }
    	.item {
    		display: flex;
    		justify-content: center;
    		align-items: center;
    	}
    	.item-content {
    		flex-grow: 1;
    	}
    	
    	.item-apply-status {
    		color: red;
    	}
    	.item-time{
    		margin-right: -40px;	
    	}
    </style>
</head>
<body>
	<div id="messageRefresh" class="mui-content mui-scroll-wrapper">
		<div class="mui-scroll">
			<ul id="content" class="mui-table-view mui-table-view-chevron">
			</ul>
		</div>
	</div>
</body>
</html>